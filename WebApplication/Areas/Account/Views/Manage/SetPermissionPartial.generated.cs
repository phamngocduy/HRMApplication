#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18444
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace HRM.Webpages.Areas.Account.Views.Manage
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 1 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
    using HRM.Webpages.Helpers;
    
    #line default
    #line hidden
    
    #line 2 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
    using HRM.Webpages.Models.Trirand;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/Account/Views/Manage/SetPermissionPartial.cshtml")]
    public partial class SetPermissionPartial : System.Web.Mvc.WebViewPage<HRM.Accounts.Models.SetPermissionModel>
    {
        public SetPermissionPartial()
        {
        }
        public override void Execute()
        {
            
            #line 5 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
 if ("SetPermission".Equals(ViewContext.RouteData.Values["Action"])) {
    
            
            #line default
            #line hidden
            
            #line 6 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
Write(Html.StatusMessage(ViewData["Message"]));

            
            #line default
            #line hidden
            
            #line 6 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
                                            
    
            
            #line default
            #line hidden
            
            #line 7 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
Write(Html.LocationAnchor("tabsEditUserPermission"));

            
            #line default
            #line hidden
            
            #line 7 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
                                                  
}

            
            #line default
            #line hidden
WriteLiteral("\r\n");

            
            #line 10 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
 using (Html.BeginForm("SetPermission", "Manage", FormMethod.Post, new { id = "setPermissionForm" })) {

            
            #line default
            #line hidden
            
            #line 11 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
Write(Html.ValidationMessage("SetPermission"));

            
            #line default
            #line hidden
            
            #line 11 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
                                        

            
            #line default
            #line hidden
WriteLiteral("<table");

WriteLiteral(" align=\"center\"");

WriteLiteral(">\r\n    <tr>\r\n        <td>\r\n            <table");

WriteLiteral(" id=\"listRoles\"");

WriteLiteral("></table>\r\n            <div");

WriteLiteral(" id=\"listRolesPager\"");

WriteLiteral("></div>\r\n        </td>\r\n        <td");

WriteLiteral(" valign=\"top\"");

WriteLiteral(">\r\n");

WriteLiteral("            ");

            
            #line 19 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
       Write(Html.Hidden("gridId"));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

WriteLiteral("            ");

            
            #line 20 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
       Write(Html.Hidden("gridIds", ViewData["GridIds"]));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

WriteLiteral("            ");

            
            #line 21 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
       Write(Html.HiddenFor(m => m.UserId));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

WriteLiteral("            ");

            
            #line 22 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
       Write(Html.HiddenFor(m => m.Permissions));

            
            #line default
            #line hidden
WriteLiteral("\r\n            <div><mark");

WriteLiteral(" id=\"userName\"");

WriteLiteral(">");

            
            #line 23 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
                                Write(ViewBag.UserName);

            
            #line default
            #line hidden
WriteLiteral("</mark></div>\r\n            <input");

WriteLiteral(" id=\"setPermission\"");

WriteLiteral(" type=\"submit\"");

WriteLiteral(" value=\"Set permissions\"");

WriteLiteral(" disabled />\r\n        </td>\r\n    </tr>\r\n</table>\r\n");

            
            #line 28 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
}

            
            #line default
            #line hidden
WriteLiteral("\r\n");

            
            #line 30 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
  
    var listRoles = new Grid()
    {
        Caption = "List of all Roles",
        Columns = new Column[] {
        new Column("Id") { Name="RoleId", Sortable=false, Hidden=true },
        new Column("Role name") { Name="RoleName", Align=Alignment.Left, Width=200, Sortable=true }},
        Width = 300,
        Height = "100%",
        Pager = "listRolesPager",
        MultiSelect = true,
        onSelectRow = "onSelectRow1Roles",
        loadComplete = "loadComplete1Roles",
        navGrid = new Navigator("listRolesPager")
    };

            
            #line default
            #line hidden
WriteLiteral(@"

<script>
var UserId = 0;
var Permissions = """";
var ListRoles = $(""#listRoles"");
var BtnSetPermission = $(""#setPermission"");
var FrmSetPermission = $(""#setPermissionForm"");

var TxtGridId = FrmSetPermission.find(""#gridId"");
var TxtGridIds = FrmSetPermission.find(""#gridIds"");
var TxtUserId = FrmSetPermission.find(""#UserId"");
var TxtUserName = FrmSetPermission.find(""#userName"");
var TxtPermissions = FrmSetPermission.find(""#Permissions"");

function onSelectRow1Roles(row) {
    var rows = ListRoles.getGridParam(""selarrrow"");
    if (rows.length) {
        rows = rows.toString().split(',');
        for (id = 0; id < rows.length; id++)
            if (rows[id] == 1) {
                rows = [1];
                ListRoles.resetSelection();
                ListRoles.setSelection(1, false);
            }
        Permissions = """";
        for (id = 0; id < rows.length; id++)
            Permissions += ListRoles.getRowData(rows[id])[""RoleId""] + "" "";
    } else Permissions = """";
    TxtPermissions.val(Permissions);
    TxtGridIds.val(ListRoles.getGridParam(""selarrrow""));
    BtnSetPermission.button(""option"", ""disabled"", false||UserId<2);
}
var gridIds = """);

            
            #line 78 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
          Write(ViewData["GridIds"]);

            
            #line default
            #line hidden
WriteLiteral(@""";
function loadComplete1Roles() {
    if (gridIds) {
        gridIds = gridIds.toString().split("","");
        for (id=0; id<gridIds.length; id++)
            ListRoles.setSelection(gridIds[id], false);
        gridIds = undefined;
    }
    BtnSetPermission.button(""option"", ""disabled"", true);
}
function setPermissions(gridId, userId, userName, permissions) {
    UserId = userId;
    ListRoles.resetSelection();
    if (userId == 1)
        ListRoles.block({ message: ""Cannot edit the first Admin."" });
    else ListRoles.unblock();
    if (permissions) {
        permissions = permissions.toString().split("" "");
        var count = ListRoles.getGridParam(""records"");
        for (id = 1; id <= count; id++)
            for (i = 0; i < permissions.length; i++)
                if (ListRoles.getRowData(id)[""RoleId""] == permissions[i])
                    ListRoles.setSelection(id, false);
    }
    TxtGridId.val(gridId);
    TxtUserId.val(userId);
    TxtUserName.text(userName);
    if (BtnSetPermission.data(""ui-button""))
        BtnSetPermission.button(""option"", ""disabled"", true);
}
</script>
");

            
            #line 109 "..\..\Areas\Account\Views\Manage\SetPermissionPartial.cshtml"
Write(Html.jqGrid("listRoles", listRoles, HttpRuntime.AppDomainAppVirtualPath + "/Manage/ListPermissions"));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

        }
    }
}
#pragma warning restore 1591

@model HRM.Databases_HDLaoDong.Models.hdPhuLucHD2
@using HRM.Databases.Models
@using HRM.Databases_HDLaoDong.Models
@using HRM.Webpages.Helpers
@{
    ViewBag.Title = "Details";
    var db = new HRMDB2Entities();
    var db0 = new HRM.Databases.Models.HRMDB0Entities();
    // in hd
    var cauHinh = db.hdCauHinh.FirstOrDefault();
    string TruongDH = cauHinh.Coquan;
    string SoHD = Model.hdChiTietHDLD.SoHD;
    string LoaiHD = Model.hdChiTietHDLD.LoaiHD;
    string ThoiHanHD = "";
    int ThoiHanHD_id = Model.hdChiTietHDLD.ThoihanHD_id;
    ThoiHanHD = Model.hdChiTietHDLD.ThoiHanHD;//db.dmThoiHanHD.Where(th => th.id == ThoiHanHD_id).FirstOrDefault().tenThoiHanHD;
    string nsdldOng_Ba = "Bà";
    int? nsdldGT_id = cauHinh.Gioitinh_id;
    string nsdlenGioiTinh = db0.dmGioiTinh.Where(gt => gt.id == nsdldGT_id).FirstOrDefault().tenGioiTinh;
    if (nsdlenGioiTinh == "Nam")
    {
        nsdldOng_Ba = "Ông";
    }
    string nsdldHoTen = cauHinh.HotenNSDLD;
    int QG_id = cauHinh.Quoctich_id;
    string nsdldQuocTich = db0.dmQuocGia.Where(qg => qg.id == QG_id).FirstOrDefault().tenQuocGia;
    int CV_id = cauHinh.Chucvu_id;
    string ChucVu = "";
    try
    {
        ChucVu = db0.dmChucVu.Where(cv => cv.id == CV_id).FirstOrDefault().tenChucVu;
    }
    catch
    {
    }
    string DiaChi = cauHinh.Diachi;
    string DienThoai = cauHinh.SDT;
    string nldOng_Ba = "Bà";
    int? nldGT_id = Model.hdChiTietHDLD.Gioitinh_id;
    string nldtenGioiTinh = db0.dmGioiTinh.Where(gt => gt.id == nldGT_id).FirstOrDefault().tenGioiTinh;
    if (nldtenGioiTinh == "Nam")
    {
        nldOng_Ba = "Ông";
    }
    string nldHoTen = Model.hdChiTietHDLD.HotenNLD;
    string nldNgaySinh = "";
    try
    {
        nldNgaySinh = Model.hdChiTietHDLD.Ngaysinh.Value.ToShortDateString();
    }
    catch
    {
    }
    string nldNoiSinh = Model.hdChiTietHDLD.Noisinh;
    int? NgheNghiep_id = Model.hdChiTietHDLD.Nghenghiep_id;
    string nldNgheNghiep = "";
    try
    {
        nldNgheNghiep = Model.hdChiTietHDLD.NgheNghiep;//db0.dmNgheNghiep.Where(nn => nn.id == NgheNghiep_id).FirstOrDefault().tenNgheNghiep;
    }
    catch { }
    string nldDiaChiThuongTru = Model.hdChiTietHDLD.Diachithuongtru;
    string nldSoCMND = Model.hdChiTietHDLD.soCMND;
    string nldcmndNoiCap = "";
    int? cmndNoiCap_id = Model.hdChiTietHDLD.cmndNoicap;
    try
    {
        nldcmndNoiCap = db0.dmTinhThanh.Where(tt => tt.id == cmndNoiCap_id).FirstOrDefault().tenTinhThanh;
    }
    catch { }
    string nldcmncNgayCap = "";
    try
    {
        nldcmncNgayCap = Model.hdChiTietHDLD.cmndNgaycap.Value.ToShortDateString();
    }
    catch { }
    string nldQuocTich = "Việt Nam";
    int? DV_id = Model.hdChiTietHDLD.Donvi_id;
    string DonVi = Model.hdChiTietHDLD.DonVi;//db0.dmDonVi.Where(dv => dv.id == DV_id).FirstOrDefault().tenDonVi;
    int? CDCM_id = Model.hdChiTietHDLD.Chucdanh_id;
    string ChucDanhCM = Model.hdChiTietHDLD.ChucDanh;//db0.dmChucDanhChuyenMon.Where(cd => cd.id == CDCM_id).FirstOrDefault().tenChucDanhChuyenMon;
    int TGLV_id = Model.hdChiTietHDLD.ThoigioLV_id;
    string ThoiGioLamViec = Model.hdChiTietHDLD.ThoiGioLV;//db.dmThoiGioLamViec.Where(tg => tg.id == TGLV_id).FirstOrDefault().tenThoiGioLamViec;
    string MucLuong = Model.hdChiTietHDLD.Mucluongchinh;
    string DiaDiemLamViec = cauHinh.DiadiemLV;
    int tuNgay = Model.hdChiTietHDLD.NgayHL.Day;
    int tuThang = Model.hdChiTietHDLD.NgayHL.Month;
    int tuNam = Model.hdChiTietHDLD.NgayHL.Year;
    int? denNgay = null;
    try
    {
        denNgay = Model.hdChiTietHDLD.NgayhetHL.Value.Day;
    }
    catch
    {

    }
    int? denThang = null;
    try
    {
        denThang = Model.hdChiTietHDLD.NgayhetHL.Value.Month;
    }
    catch
    {
    }
    int? denNam = null;
    try
    {
        denNam = Model.hdChiTietHDLD.NgayhetHL.Value.Year;
    }
    catch
    {
    }
    string nldChucVu = "";
    int? nldCV_id = Model.hdChiTietHDLD.Chucvu_id;
    try
    {
        nldChucVu = Model.hdChiTietHDLD.ChucVu;//db0.dmChucVu.Where(dv => dv.id == nldCV_id).FirstOrDefault().tenChucVu;
    }
    catch
    {
    }
    double? HeSo = null;
    var Bac = "";
    var Ngach = "";
    var Nhom = "";
    var MaNhom = "";
    var BangLuong = Model.hdChiTietHDLD.Bangluong_id;

    int? nHSLuong_id = Model.hdChiTietHDLD.HSLuong_id;
    int? nNgach_id = Model.hdChiTietHDLD.Ngach_id;
    int? nNhom_id = Model.hdChiTietHDLD.Nhom_id;
    try
    {
        HeSo = Model.hdChiTietHDLD.HSLuong;//db0.dmBangLuong.Where(bl => bl.id == nHSLuong_id).FirstOrDefault().hesoLuong;
    }
    catch
    {
    }
    try
    {
        Bac = Model.hdChiTietHDLD.Bac;//db0.dmBangLuong.Where(bl => bl.id == nHSLuong_id).FirstOrDefault().bacLuong;
    }
    catch
    {
    }
    try
    {
        Ngach = Model.hdChiTietHDLD.Ngach;//db0.dmNgachVienChuc.Where(bl => bl.id == nNgach_id).FirstOrDefault().tenNgachVienChuc;
    }
    catch
    {
    }
    try
    {
        Nhom = Model.hdChiTietHDLD.Nhom;//db0.dmNhomNgachVienChuc.Where(bl => bl.id == nNhom_id).FirstOrDefault().tenNhomNgachVienChuc;
        MaNhom = Model.hdChiTietHDLD.MaNhom;//db0.dmNhomNgachVienChuc.Where(bl => bl.id == nNhom_id).FirstOrDefault().maNhomNgachVienChuc;
    }
    catch
    {
    }
    float? K = null;
    try
    {
        K = float.Parse(Model.HSKLCV1) * float.Parse(Model.HSSLSV2);
    }
    catch { }
    TempData["Details"] = TempData["Details"];
}
 @try
         {
    <p>@Html.ActionLink("Quay lại", TempData["Details"].ToString(), "ThemMoiHD", new { id = ViewBag.HD_id }, null)</p>
         }
         catch
         { <p>@Html.ActionLink("Quay lại", "Index", "HDNguoiLaoDong")</p>}
<textarea id="PL2">
<div>
    <div style="float:left;font-size:16px; padding:0px;margin:0px;">@Html.Raw(TruongDH)
    </div> 
    <div style="float:right;font-size:16px; padding:0px;margin:0px;"><b>CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM</b>
    <p style=" padding:0px;font-size:18px; margin:0px; text-align:center">Độc lập - Tự do - Hạnh phúc</p>
    </div>
    <br /><br /><br /><br /><br /><br /><br /><br />
    <div style="float:left;font-size:18px; padding:0px;margin:0px">
    <p style=" padding:0px;font-size:22px; margin:0px; text-align:center"><b>PHỤ LỤC SỐ 2 HỢP ĐỒNG LAO ĐỘNG</b></p>
    <div>
    <br />
    <div style="float:left; font-size:16px;padding:0px;margin:0px;">
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Căn cứ Quy định tạm thời về cách tính lương mới ban hành kèm theo Quyết định số: </p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">468/2008/QĐ-VL ngày 24 tháng 11 năm 2008 của Hiệu trưởng Trường Đại học dân lập</p>
    <p>Văn Lang,</p>
    <table style="border-collapse:collapse;white-space:nowrap;outline-color:White;outline-width:0px; margin-left:-2px ">
    <tbody>
    <tr>
    <td style = "width:370px; margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Chúng tôi, một bên là @Html.Raw(nsdldOng_Ba) <b>@Html.Raw(nsdldHoTen)</b></td>
    <td style = "margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Quốc tịch: @Html.Raw(nsdldQuocTich)</td>
    </tr>
    </tbody>
    </table> 
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Chức vụ:          @Html.Raw(ChucVu)</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Đại diện cho:     @Html.Raw("Trường Đại học Dân lập Văn Lang")</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Địa chỉ: @Html.Raw(DiaChi)</p> 
    <table style="border-collapse:collapse;white-space:nowrap;outline-color:White;outline-width:0px; margin-left:-2px ">
    <tbody>
    <tr>
    <td style = "width:370px; margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Và một bên là @Html.Raw(nldOng_Ba) <b>@Html.Raw(nldHoTen)</b></td>
    <td style = "margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Quốc tịch: @Html.Raw(nldQuocTich)</td>
    </tr>
    </tbody>
    </table> 
    <br />
    <table style="border-collapse:collapse;white-space:nowrap;outline-color:White;outline-width:0px; margin-left:-2px ">
    <tbody>
    <tr>
    <td style = "width:370px; margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Sinh ngày: @Html.Raw(nldNgaySinh)</td>
    <td style = "margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">tại: @Html.Raw(nldNoiSinh)</td>
    </tr>
    </tbody>
    </table>
    <br />
    <table style="border-collapse:collapse;white-space:nowrap;outline-color:White;outline-width:0px; margin-left:-2px ">
    <tbody>
    <tr>
    <td style = "width:370px; margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Nghề nghiệp: @Html.Raw(nldNgheNghiep)</td>
    <td style = "margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">chức danh: @Html.Raw(ChucDanhCM);</td>
    </tr>
    </tbody>
    </table>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Địa chỉ thường trú: @Html.Raw(nldDiaChiThuongTru)</p>
    <table style="border-collapse:collapse;white-space:nowrap;outline-color:White;outline-width:0px; margin-left:-2px ">
    <tbody>
    <tr>
    <td style = "width:190px; margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Số CMND: @Html.Raw(nldSoCMND)</td>
    <td style = "width:175px; margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">Cấp ngày @Html.Raw(nldcmncNgayCap)</td>
    <td style = "margin-left:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;">tại CA. @Html.Raw(nldcmndNoiCap)</td>
    </tr>
    </tbody>
    </table>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Hai bên thỏa thuận ký kết phụ lục hợp đồng lao động như sau:</p> 
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Bổ sung điều 3 khoản 1 trong Hợp đồng lao động số @Html.Raw(Model.hdChiTietHDLD.SoHD) ngày @Html.Raw(Model.hdChiTietHDLD.NgayHL.Day) tháng @Html.Raw(Model.hdChiTietHDLD.NgayHL.Month) </p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">năm @Html.Raw(Model.hdChiTietHDLD.NgayHL.Year) đã ký kết như sau: </p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Thu nhập = [(HSL x MLTT) + (CSTL x C x T)] x K x H + TL</p>
        <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	Hệ số lương (HSL): @Html.Raw(Model.HSLuong);</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	Mức lương tối thiểu (MLTT): Theo quy định của nhà trường, tại thời điểm ngày @Html.Raw(Model.hdChiTietHDLD.NgayHL.ToShortDateString()) </p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">&nbsp là @Html.Raw(Model.Mucluongtoithieu)đ;</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	Cơ số tiền lương (CSTL): Theo quy định của nhà trường, tại thời điểm ngày @Html.Raw(Model.hdChiTietHDLD.NgayHL.ToShortDateString())</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">&nbsp là: @Html.Raw(Model.CSTienluong)đ;</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	Hệ số chức danh, trình độ: C = C1 x C2;</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">&nbsp+  Hệ số chức danh chuyên môn, trình độ C1 = @Html.Raw(Model.HSCDCM);</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">&nbsp+  Hệ số nhiệm vụ C2 = @Html.Raw(Model.HSNhiemvu);</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	Hệ số thâm niên T = 1+ 0,003 x T1 = @Html.Raw(Model.HSThamnien) (T1 là số năm công tác tại Trường);</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	Khối lượng công việc K = @Html.Raw(K);</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	Hiệu quả công việc H: mới tuyển dụng chưa đánh giá hiệu quả;</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">-	TL: @Html.Raw(Model.Thulao) Thù lao vượt giờ hoặc ngoài giờ (nếu có);</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Thu nhập: @Html.Raw(Model.Thunhap) đồng/tháng (không bao gồm TL).</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Phụ lục này đi kèm với Hợp đồng lao động số @Html.Raw(Model.hdChiTietHDLD.SoHD) ngày @Html.Raw(Model.hdChiTietHDLD.NgayHL.Day) tháng @Html.Raw(Model.hdChiTietHDLD.NgayHL.Month) năm</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">@Html.Raw(Model.hdChiTietHDLD.NgayHL.Year). Phụ lục được lập thành 02 (hai) bản có giá trị như nhau, người lao động giữ 01 bản,</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">người sử dụng lao động giữ 01 bản.</p>
    <p style="font-size:18px;padding:0px;margin:0px; text-align:left">Phụ lục hợp đồng làm tại Phòng Kế hoạch và Quản lý nhân lực ngày @Html.Raw(DateTime.Today.Day) tháng @Html.Raw(DateTime.Today.Month) năm @Html.Raw(DateTime.Today.Year)</p>
    <br />
    <table style="border-collapse:collapse;white-space:nowrap;outline-color:White;outline-width:0px;margin-left:30px">
    <tbody>
    <tr>
        <td style= "width:380px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"><b>Người lao động</b></td>
        <td style= "outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"><b>Người sử dụng lao động</b></td>
    </tr>
    <tr>
        <td style= "width:380px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"></td>
        <td style= "outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"></td>
    </tr>
    <tr>
        <td style= "width:380px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"></td>
        <td style= "text-align:center;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"><b>Hiệu trưởng</b></td>
    </tr>
    <tr>
        <td style= "width:380px;height:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"></td>
        <td style= "height:100px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"></td>
    </tr>
    <tr>
        <td style= "width:380px;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"></td>
        <td style= "text-align:center;outline-color:White;border-color:White;font-family: sans-serif, Arial, Verdana, 'Trebuchet MS';font-size: 18px;"><b>@Html.Raw(nsdldHoTen)</b></td>
    </tr>
    </tbody>
    </table>
    </div>     
</div>
</textarea>

<script src="~/Scripts/ckeditor/ckeditor.js" type="text/javascript"></script>
<link href="~/Scripts/ckeditor/skins/moono/dialog_ie8.css"
    rel="stylesheet" type="text/css" />
<link href="~/Scripts/ckeditor/skins/moono/editor_ie8.css" rel="stylesheet"
    type="text/css" />
<script src="~/Scripts/ckeditor/adapters/jquery.js" type="text/javascript"></script>
<link href="~/Scripts/ckeditor/contents.css" rel="stylesheet"
    type="text/css" />
<script>
    $(document).ready(function () {
        $('textarea#PL2').ckeditor();
    });
</script>